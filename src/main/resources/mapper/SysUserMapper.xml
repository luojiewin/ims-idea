<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.roger.ims.dao.SysUserDao">
	<resultMap id="BaseResultMap"
		type="com.roger.ims.entity.SysUser">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		<result column="user_id" jdbcType="BIGINT" property="userId" />
		<result column="login_name" jdbcType="VARCHAR"
			property="loginName" />
		<result column="password" jdbcType="VARCHAR"
			property="password" />
		<result column="username" jdbcType="VARCHAR"
			property="username" />
		<result column="telphone" jdbcType="VARCHAR"
			property="telphone" />
		<result column="email" jdbcType="VARCHAR" property="email" />
		<result column="last_login_time" jdbcType="TIMESTAMP"
			property="lastLoginTime" />
		<result column="creation_time" jdbcType="TIMESTAMP"
			property="creationTime" />
		<result column="creation_user_id" jdbcType="BIGINT"
			property="creationUserId" />
		<result column="last_update_time" jdbcType="TIMESTAMP"
			property="lastUpdateTime" />
		<result column="last_update_user_id" jdbcType="BIGINT"
			property="lastUpdateUserId" />
	</resultMap>
	<insert id="insert" parameterType="com.roger.ims.entity.SysUser">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		<selectKey keyProperty="userId" order="BEFORE"
			resultType="java.lang.Long">
			SELECT LAST_INSERT_ID()
		</selectKey>
		insert into sys_user (user_id, login_name, password,
		username,
		telphone, email,
		last_login_time, creation_time, creation_user_id,
		last_update_time, last_update_user_id)
		values
		(#{userId,jdbcType=BIGINT}, #{loginName,jdbcType=VARCHAR},
		#{password,jdbcType=VARCHAR},
		#{username,jdbcType=VARCHAR},
		#{telphone,jdbcType=VARCHAR}, #{email,jdbcType=VARCHAR},
		#{lastLoginTime,jdbcType=TIMESTAMP},
		#{creationTime,jdbcType=TIMESTAMP}, #{creationUserId,jdbcType=BIGINT},
		#{lastUpdateTime,jdbcType=TIMESTAMP},
		#{lastUpdateUserId,jdbcType=BIGINT})
	</insert>
	<select id="selectAll" resultMap="BaseResultMap">
		<!-- WARNING - @mbg.generated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		select user_id, login_name, password, username, telphone, email,
		last_login_time,
		creation_time, creation_user_id, last_update_time,
		last_update_user_id
		from sys_user
	</select>

	<select id="selectUserInfoByUser" resultMap="BaseResultMap"
		parameterType="com.roger.ims.entity.SysUser">
		select user_id, login_name, password, username,
		telphone, email,
		last_login_time,
		creation_time, creation_user_id,
		last_update_time, last_update_user_id
		from sys_user
		where
		login_name=#{loginName}
		and password = #{password}
	</select>

	<select id="selectUser" resultMap="BaseResultMap"
		parameterType="com.roger.ims.dto.UserVo">
		SELECT
		user_id,
		login_name,
		PASSWORD,
		username,
		telphone,
		email,
		last_login_time,
		creation_time,
		creation_user_id,
		last_update_time,
		last_update_user_id sys_user
		FROM
		sys_user
		<where>
			1=1
			<if test="userId!=null and userId!=''">
				AND user_id = #{userId}
			</if>
			<if test="loginName!=null and loginName!=''">
				AND login_name = #{loginName}
			</if>
			<if test="username!=null and username!=''">
				AND username = #{username}
			</if>
			<if test="telphone!=null and telphone!=''">
				AND telphone = #{telphone}
			</if>
		</where>
	</select>
	
	<update id="update">
		update sys_user
		set login_name = '222222'
		where user_id = 4
	</update>

</mapper>